{"is_source_file": true, "format": "TypeScript", "description": "This file defines the API class for interacting with notes, providing methods for listing, creating, updating, and deleting notes via a remote API or local storage fallback.", "external_files": ["https://developer.mozilla.org/en-US/docs/Web/API/fetch", "localStorage (Web Storage API)", "process.env (environment variables)", "crypto (for crypto.randomUUID)"], "external_methods": ["fetch", "localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "crypto.randomUUID", "Date.prototype.toISOString"], "published": ["Note", "NoteInput", "API"], "classes": [{"name": "API", "description": "A class providing methods to interact with notes data through API or local storage fallback."}], "methods": [{"name": "isRemote", "description": "Returns true if using remote API, false if using local storage fallback."}, {"name": "listNotes", "description": "Fetches a list of notes from API or local storage."}, {"name": "createNote", "description": "Creates a new note via API or local storage fallback."}, {"name": "updateNote", "description": "Updates an existing note via API or local storage fallback."}, {"name": "deleteNote", "description": "Deletes a note via API or local storage fallback."}, {"name": "readLocal", "description": "Reads notes from local storage."}, {"name": "writeLocal", "description": "Writes notes to local storage."}, {"name": "nowISO", "description": "Returns the current date/time in ISO string format."}], "calls": ["fetch", "localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "crypto.randomUUID", "Date.prototype.toISOString"], "search-terms": ["TypeScript API class", "notes management", "localStorage fallback", "environment variable API base", "listNotes method", "createNote method", "updateNote method", "deleteNote method"], "state": 2, "file_id": 12, "knowledge_revision": 28, "git_revision": "", "ctags": [{"_type": "tag", "name": "API", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^export class API {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^export type Note = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "NoteInput", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^type NoteInput = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^      content: input.content,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^      const data = await res.json();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "envBase", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^    const envBase = process.env.NEXT_PUBLIC_API_BASE?.trim();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^      ...list[idx],$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^    const idx = list.findIndex((n) => n.id === id);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^    const list = [note, ...this.readLocal()];$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^    const list = this.readLocal().filter((n) => n.id !== id);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^    const list = this.readLocal();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^    const next = [...list];$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^    const note: Note = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "parsed", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^      const parsed = JSON.parse(raw) as Note[];$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^      const raw = localStorage.getItem(this.storageKey);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^      const res = await fetch(`${this.baseUrl}\\/notes\\/${encodeURIComponent(id)}`, {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^      const res = await fetch(`${this.baseUrl}\\/notes`, { cache: \"no-store\" });$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^      const res = await fetch(`${this.baseUrl}\\/notes`, {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^      title: input.title,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^    const updated: Note = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/note-management-system-37320-37364/notes_frontend/src/lib/api.ts", "pattern": "/^      updatedAt: this.nowISO(),$/", "language": "TypeScript", "kind": "constant"}], "hash": "05c822e3ac73c2d24780a6eec63ee2ba", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/lib/api.ts", "revision_history": [{"28": ""}]}